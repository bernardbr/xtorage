"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xtorage=exports.Xtorage=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"localStorage":arguments[0],n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];_classCallCheck(this,e),this._storage=t,this._unique=n}return _createClass(e,[{key:"save",value:function(e,t,n){var r=this._parseOptions(n);window[r.storage].setItem(e,this._toStringifiedJSON(t))}},{key:"saveInFirstPosition",value:function(e,t,n){this._saveInArray(e,t,"unshift",n)}},{key:"saveInLastPosition",value:function(e,t,n){this._saveInArray(e,t,"push",n)}},{key:"get",value:function(e,t){var n=this._parseOptions(t),r=window[n.storage].getItem(e);return this._fromStringifiedJSON(r)}},{key:"getFirst",value:function(e,t){return this._getFromArray(e,0,t)}},{key:"getLast",value:function(e,t){return this._getFromArray(e,"last",t)}},{key:"remove",value:function(e,t){var n=this._parseOptions(t);window[n.storage].removeItem(e)}},{key:"removeFirst",value:function(e,t){this._removeFromArray(e,"shift",t)}},{key:"removeLast",value:function(e,t){this._removeFromArray(e,"pop",t)}},{key:"removeAll",value:function(e){var t=this._parseOptions(e);window[t.storage].clear()}},{key:"_toStringifiedJSON",value:function(e){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?e:JSON.stringify(e)}},{key:"_fromStringifiedJSON",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"_parseOptions",value:function(e){var t={storage:e&&e.storage?e.storage:this.storage,unique:e&&e.unique?e.unique:this.unique};return t}},{key:"_equals",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"_saveInArray",value:function(e,t,n,r){var i=this,o=this._parseOptions(r),a=this.get(e,o)||[],u=!1;if(a instanceof Array)return o.unique&&a.length&&a.forEach(function(e){if(i._equals(t,e))return u=!0}),o.unique&&!u||!o.unique?(a[n](t),void this.save(e,a,o)):void 0}},{key:"_getFromArray",value:function(e,t,n){var r,i=this.get(e,n);if(i instanceof Array&&i.length)return r="number"==typeof t?t:i.length-1,i[r]}},{key:"_removeFromArray",value:function(e,t,n){var r=this.get(e,n);r instanceof Array&&(r[t](),this.save(e,r,n))}},{key:"storage",set:function(e){this._storage=e},get:function(){return this._storage}},{key:"unique",set:function(e){this._unique=e},get:function(){return this._unique}}]),e}();
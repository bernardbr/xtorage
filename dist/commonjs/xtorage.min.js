"use strict";function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xtorage=exports.Xtorage=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?"localStorage":arguments[0],n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];_classCallCheck(this,e),this._storage=t,this._unique=n}return _createClass(e,[{key:"save",value:function(e,t){window[this.storage].setItem(e,this._toStringifiedJSON(t))}},{key:"saveInFirstPosition",value:function(e,t){this._saveInArray(e,t,"unshift")}},{key:"saveInLastPosition",value:function(e,t){this._saveInArray(e,t,"push")}},{key:"get",value:function(e){var t=window[this.storage].getItem(e);return this._fromStringifiedJSON(t)}},{key:"getFirst",value:function(e){return this._getFromArray(e,0)}},{key:"getLast",value:function(e){return this._getFromArray(e,"last")}},{key:"remove",value:function(e){window[this.storage].removeItem(e)}},{key:"removeFirst",value:function(e){this._removeFromArray(e,"shift")}},{key:"removeLast",value:function(e){this._removeFromArray(e,"pop")}},{key:"removeAll",value:function(){window[this.storage].clear()}},{key:"_toStringifiedJSON",value:function(e){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?e:JSON.stringify(e)}},{key:"_fromStringifiedJSON",value:function(e){try{return JSON.parse(e)}catch(t){return e}}},{key:"_equals",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"_saveInArray",value:function(e,t,n){var r=this,i=this.get(e)||[],o=!1;if(i instanceof Array)return this.unique&&i.length&&i.forEach(function(e){if(r._equals(t,e))return o=!0}),this.unique&&!o||!this.unique?(i[n](t),void this.save(e,i)):void 0}},{key:"_getFromArray",value:function(e,t){var n,r=this.get(e);if(r instanceof Array&&r.length)return n="number"==typeof t?t:r.length-1,r[n]}},{key:"_removeFromArray",value:function(e,t){var n=this.get(e);n instanceof Array&&(n[t](),this.save(e,n))}},{key:"storage",set:function(e){this._storage=e},get:function(){return this._storage}},{key:"unique",set:function(e){this._unique=e},get:function(){return this._unique}}]),e}();